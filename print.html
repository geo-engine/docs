<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js geo-engine">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Geo Engine Docs</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "geo-engine" : "geo-engine";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('geo-engine')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <div class="sidebar-scrollbox">
                <!-- TODO: Replace with standard functionality: https://github.com/rust-lang/mdBook/pull/1584 -->
                <div class="sidebar-book-logo">
                    <img src="images/geoengine-web.svg" alt="Geo Engine">
                </div>
                <ol class="chapter"><li class="chapter-item expanded "><a href="welcome.html"><strong aria-hidden="true">1.</strong> Welcome to Geo Engine Docs</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> The Geo Engine</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Engine</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.2.</strong> Workflows</div></li></ol></li><li class="chapter-item expanded "><a href="datatypes/intro.html"><strong aria-hidden="true">3.</strong> Datatypes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="datatypes/measurement.html"><strong aria-hidden="true">3.1.</strong> Measurement</a></li><li class="chapter-item expanded "><a href="datatypes/rasterdatatype.html"><strong aria-hidden="true">3.2.</strong> RasterDataType</a></li><li class="chapter-item expanded "><a href="datatypes/timeinstance.html"><strong aria-hidden="true">3.3.</strong> TimeInstance</a></li><li class="chapter-item expanded "><a href="datatypes/timestep.html"><strong aria-hidden="true">3.4.</strong> TimeStep</a></li></ol></li><li class="chapter-item expanded "><a href="operators/intro.html"><strong aria-hidden="true">4.</strong> Operators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="operators/boxplot.html"><strong aria-hidden="true">4.1.</strong> BoxPlot</a></li><li class="chapter-item expanded "><a href="operators/expression.html"><strong aria-hidden="true">4.2.</strong> Expression</a></li><li class="chapter-item expanded "><a href="operators/gdalsource.html"><strong aria-hidden="true">4.3.</strong> GdalSource</a></li><li class="chapter-item expanded "><a href="operators/reprojection.html"><strong aria-hidden="true">4.4.</strong> Reprojection</a></li><li class="chapter-item expanded "><a href="operators/scatterplot.html"><strong aria-hidden="true">4.5.</strong> ScatterPlot</a></li><li class="chapter-item expanded "><a href="operators/temporalrasteraggregation.html"><strong aria-hidden="true">4.6.</strong> TemporalRasterAggregation</a></li><li class="chapter-item expanded "><a href="operators/timeprojection.html"><strong aria-hidden="true">4.7.</strong> TimeProjection</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> OGC Access</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> WMS</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Solutions</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Geo Engine Pro</div></li></ol></li></ol>                <ol class="chapter">
                    <li class="part-title">API Reference</li>
                    <li class="chapter-item">
                        <a href="https://python.docs.geoengine.io" style="width: 100%; display: flex; flex-direction: row;">
                            <span style="flex: 1;">Python</span>
                            <i class="fa fa-external-link" style="align-self: center;"></i>
                        </a>
                    </li>
                </ol>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <!-- TODO: include back if we have a dark theme -->
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list" style="display: none;">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Geo Engine Docs</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome-to-geo-engine-docs"><a class="header" href="#welcome-to-geo-engine-docs">Welcome to Geo Engine Docs</a></h1>
<p>Geo Engine is a cloud-ready geo-spatial data processing platform.
This documentation presents the foundations of the system and how to use it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="datatypes"><a class="header" href="#datatypes">Datatypes</a></h1>
<p>This chapter introduces the datatypes of Geo Engine.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="measurement"><a class="header" href="#measurement">Measurement</a></h1>
<p>Measurements describe stored data, i.e. what is measured and in which unit.</p>
<h2 id="unitless"><a class="header" href="#unitless">Unitless</a></h2>
<p>Some values do not have a associated measurement or no information is present.</p>
<h3 id="example-json"><a class="header" href="#example-json">Example JSON</a></h3>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;unitless&quot;
}
</code></pre>
<h2 id="continuous"><a class="header" href="#continuous">Continuous</a></h2>
<p>A contiuous variable that is measured in a certain unit.</p>
<h3 id="example-json-1"><a class="header" href="#example-json-1">Example JSON</a></h3>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;continuous&quot;,
  &quot;measurement&quot;: &quot;Reflectance&quot;,
  &quot;unit&quot;: &quot;%&quot;
}
</code></pre>
<h2 id="classification"><a class="header" href="#classification">Classification</a></h2>
<p>A classification maps numbers to named classes.</p>
<h3 id="example-json-2"><a class="header" href="#example-json-2">Example JSON</a></h3>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;classification&quot;,
  &quot;measurement&quot;: &quot;Land Cover&quot;,
  &quot;classes&quot;: {
    &quot;0&quot;: &quot;Grassland&quot;,
    &quot;1&quot;: &quot;Forest&quot;,
    &quot;2&quot;: &quot;Water&quot;
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="raster-data-type"><a class="header" href="#raster-data-type">Raster Data Type</a></h1>
<p>Rasters can have the following data types:</p>
<ul>
<li>U8: unsigned 8-bit integer</li>
<li>I8: signed 8-bit integer</li>
<li>U16: unsigned 16-bit integer</li>
<li>I16: signed 16-bit integer</li>
<li>U32: unsigned 32-bit integer</li>
<li>I32: signed 32-bit integer</li>
<li>U64: unsigned 64-bit integer</li>
<li>I64: signed 64-bit integer</li>
<li>F32: 32-bit floating-point</li>
<li>F64: 64-bit floating-point</li>
</ul>
<h1 id="example-json-3"><a class="header" href="#example-json-3">Example JSON</a></h1>
<pre><code class="language-json">&quot;U8&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="time-instance"><a class="header" href="#time-instance">Time Instance</a></h1>
<p>A time instance is a single point in time.
It is specified in UTC time zone 0 and has a maximum resolution of milliseconds.</p>
<h1 id="example-json-4"><a class="header" href="#example-json-4">Example JSON</a></h1>
<p>Specifying in ISO 8601:</p>
<pre><code class="language-json">&quot;2010-01-01T00:00:00Z&quot;
</code></pre>
<p>Using the same date as a UNIX timestamp in milliseconds:</p>
<pre><code class="language-json">1262304000000
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="time-step"><a class="header" href="#time-step">Time Step</a></h1>
<p>A time step consists of a granularity and a number of steps.
For instance, you can specify yearly steps by settings the granularity to <code>Years</code> and the number of steps to 1.
Half-yearly steps can be specified by setting the granularity to <code>Months</code> and the number of steps to 6.</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>granularity</code></td><td><code>TimeGranularity</code></td><td>granularity of the time steps</td><td><code>Months</code></td></tr>
<tr><td><code>step</code></td><td><code>i32</code></td><td>number of time steps</td><td>1</td></tr>
</tbody></table>
<h2 id="timegranularity"><a class="header" href="#timegranularity">TimeGranularity</a></h2>
<p>The granularity of the time steps can take one of the following values.</p>
<table><thead><tr><th>Variant</th><th>Description</th></tr></thead><tbody>
<tr><td><code>Millis</code></td><td>milliseconds</td></tr>
<tr><td><code>Seconds</code></td><td>seconds</td></tr>
<tr><td><code>Minutes</code></td><td>minutes</td></tr>
<tr><td><code>Hours</code></td><td>hours</td></tr>
<tr><td><code>Days</code></td><td>days</td></tr>
<tr><td><code>Months</code></td><td>months</td></tr>
<tr><td><code>Years</code></td><td>years</td></tr>
</tbody></table>
<h1 id="example-json-5"><a class="header" href="#example-json-5">Example JSON</a></h1>
<pre><code class="language-json">{
  &quot;granularity&quot;: &quot;Months&quot;,
  &quot;step&quot;: 1
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operators"><a class="header" href="#operators">Operators</a></h1>
<p>This chapter introduces the operators of Geo Engine.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="boxplot"><a class="header" href="#boxplot">BoxPlot</a></h1>
<p>The <code>BoxPlot</code> is a <em>plot operator</em> that computes a box plot over</p>
<ul>
<li>a selection of numerical columns of a single vector dataset, or</li>
<li>multiple raster datasets.</li>
</ul>
<p>Thereby, the operator considers all data in the given query rectangle.</p>
<p>The boxes of the plot span the 1st and 3rd quartile and highlight the median. The whiskers indicate the minimum and maximum values of the corresponding attribute or raster.</p>
<h2 id="vector-data"><a class="header" href="#vector-data">Vector Data</a></h2>
<p>In case of vector data, the operator generates one box for each of the selected numerical attributes. The operator returns an error if one the selected attributes is not numeric.</p>
<h3 id="parameter"><a class="header" href="#parameter">Parameter</a></h3>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>columnNames</code></td><td><code>Vec&lt;String&gt;</code></td><td>The names of the attributes to generate boxes for.</td><td><code>[&quot;x&quot;,&quot;y&quot;]</code></td></tr>
</tbody></table>
<h2 id="raster-data"><a class="header" href="#raster-data">Raster Data</a></h2>
<p>For raster data, the operator generates one box for each input raster.</p>
<h3 id="parameter-1"><a class="header" href="#parameter-1">Parameter</a></h3>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>columnNames</code></td><td><code>Vec&lt;String&gt;</code></td><td><em>Optional</em>: An alias for each input source. The operator will automatically name the boxes <code>Raster-1</code>, <code>Raster-2</code>, ... if this parameter is empty. If aliases are given, the number of aliases must match the number of input rasters. Otherwise an error is returned.</td><td><code>[&quot;A&quot;,&quot;B&quot;]</code>.</td></tr>
<tr><td><code>includeNoData</code></td><td><code>bool</code></td><td>Flag whether to include <em>no data</em> values.</td><td><code>true</code></td></tr>
</tbody></table>
<h2 id="inputs"><a class="header" href="#inputs">Inputs</a></h2>
<p>The operator consumes exactly one <em>vector</em> or multiple <em>raster</em> operators.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>source</code></td><td><code>MultipleRasterOrSingleVectorSource</code></td></tr>
</tbody></table>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<p>The operator returns an error in the following cases.</p>
<ul>
<li>Vector data: The <code>attribute</code> for one of the given <code>columnNames</code> is not numeric.</li>
<li>Vector data: The <code>attribute</code> for one of the given <code>columnNames</code> does not exist.</li>
<li>Raster data: The length of the <code>columnNames</code> parameter does not match the number of input rasters.</li>
</ul>
<h2 id="notes"><a class="header" href="#notes">Notes</a></h2>
<p>If your dataset contains <code>infinite</code> or <code>NAN</code> values, they are ignored for the computation. Moreover, if your dataset contains more than <code>10.000</code>values (which is likely for rasters),
the median and quartiles are estimated using the P^2 algorithm described in:</p>
<p>R. Jain and I. Chlamtac, The P^2 algorithm for dynamic calculation of quantiles and
histograms without storing observations, Communications of the ACM,
Volume 28 (October), Number 10, 1985, p. 1076-1085.
<a href="https://www.cse.wustl.edu/%7Ejain/papers/ftp/psqr.pdf">https://www.cse.wustl.edu/~jain/papers/ftp/psqr.pdf</a></p>
<h2 id="example-json-6"><a class="header" href="#example-json-6">Example JSON</a></h2>
<h3 id="vector"><a class="header" href="#vector">Vector</a></h3>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;BoxPlot&quot;,
  &quot;params&quot;: {
    &quot;columnNames&quot;: [
      &quot;x&quot;,
      &quot;y&quot;
    ]
  },
  &quot;sources&quot;: {
    &quot;source&quot;: {
      &quot;type&quot;: &quot;OgrSource&quot;,
      &quot;params&quot;: {
        &quot;dataset&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
        }
      }
    }
  }
}
</code></pre>
<h3 id="raster"><a class="header" href="#raster">Raster</a></h3>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;BoxPlot&quot;,
  &quot;params&quot;: {
    &quot;columnNames&quot;: [
      &quot;A&quot;,
      &quot;B&quot;
    ],
    &quot;includeNoData&quot;: true
  },
  &quot;sources&quot;: {
    &quot;source&quot;: [
      {
        &quot;type&quot;: &quot;GdalSource&quot;,
        &quot;params&quot;: {
          &quot;dataset&quot;: {
            &quot;type&quot;: &quot;internal&quot;,
            &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
          }
        }
      },
      {
        &quot;type&quot;: &quot;GdalSource&quot;,
        &quot;params&quot;: {
          &quot;dataset&quot;: {
            &quot;type&quot;: &quot;internal&quot;,
            &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
          }
        }
      }
    ]
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="raster-expression"><a class="header" href="#raster-expression">Raster Expression</a></h1>
<p>The <code>Expression</code> operator performs a pixel-wise mathematical expression on one or more raster sources.
The expression is specified as a user-defined script in a very simple language.
The output is a raster time series with the result of the expression and with time intervals that are the same as for the inputs.
Users can specify an output data type.
Internally, the expression is evaluated using floating-point numbers.</p>
<p>An example usage scenario is to calculate NDVI for a red and a near-infrared raster channel.
The expression uses two raster sources, referred to as A and B, and calculates the formula <code>(A - B) / (A + B)</code>.
When the temporal resolution is months, our output NDVI will also be a monthly time series.</p>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>expression</code></td><td><code>Expression</code></td><td>Expression script</td><td><pre><code>(A - B) / (A + B)</code></pre></td></tr>
<tr><td><code>outputType</code></td><td><a href="operators//datatypes/rasterdatatype.html"><code>RasterDataType</code></a></td><td>A raster data type for the output</td><td><pre><code>U8</code></pre></td></tr>
<tr><td><code>outputNoDataValue</code></td><td><code>Number</code></td><td>NO DATA value for the output</td><td><pre><code>-2</code></pre></td></tr>
<tr><td><code>outputMeasurement</code></td><td><a href="operators//datatypes/measurement.html"><code>Measurement</code></a></td><td>Description about the output</td><td><pre><code>{<br>  &quot;type&quot;: &quot;continuous&quot;,<br>  &quot;measurement&quot;: &quot;NDVI&quot;<br>}</code></pre></td></tr>
<tr><td><code>mapNoData</code></td><td><code>Boolean</code></td><td>Should NO DATA values be mapped with the <code>expression</code>? Otherwise, they are mapped automatically to NO DATA.</td><td><pre><code>false</code></pre></td></tr>
</tbody></table>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<p>The following describes the types used in the parameters.</p>
<h3 id="expression"><a class="header" href="#expression">Expression</a></h3>
<p>Expressions are simple scripts to perform pixel-wise computations.
One can refer to the raster inputs as <code>A</code> for the first raster, <code>B</code> for the second, and so on.
Furthermore, expressions can check with <code>A IS NODATA</code>, <code>B IS NODATA</code>, etc for NO DATA values.
This is important if <code>mapNoData</code> is set to true.
Otherwise, NO DATA values are mapped automatically to the output NO DATA value.
Finally, the value <code>out_nodata</code> can be used to output NO DATA.</p>
<p>Users can basically think of this implicit function signature for, e.g., two inputs:</p>
<pre><code class="language-Rust">fn (A: f64, B: f64, out_nodata: f64) -&gt; f64
</code></pre>
<p>As a start, expressions contain algebraic operations and mathematical functions.</p>
<pre><code class="language-Rust">(A + B) / 2
</code></pre>
<p>In addition, branches can be used to check for conditions.</p>
<pre><code class="language-Rust">if A IS NODATA {
    B
} else {
    A
}
</code></pre>
<p>Function calls can be used to access utility functions.</p>
<pre><code class="language-Rust">max(A, 0)
</code></pre>
<p>Currently, the following functions are available:</p>
<ul>
<li><code>abs(a)</code>: absolute value</li>
<li><code>min(a, b)</code>, <code>min(a, b, c)</code>: minimum value</li>
<li><code>max(a, b)</code>, <code>max(a, b, c)</code>: maximum value</li>
<li><code>sqrt(a)</code>: square root</li>
<li><code>ln(a)</code>: natural logarithm</li>
<li><code>log10(a)</code>: base 10 logarithm</li>
<li><code>cos(a)</code>, <code>sin(a)</code>, <code>tan(a)</code>, <code>acos(a)</code>, <code>asin(a)</code>, <code>atan(a)</code>: trigonometric functions</li>
<li><code>pi()</code>, <code>e()</code>: mathematical constants</li>
<li><code>round(a)</code>, <code>ceil(a)</code>, <code>floor(a)</code>: rounding functions</li>
<li><code>mod(a, b)</code>: division remainder</li>
<li><code>to_degrees(a)</code>, <code>to_radians(a)</code>: conversion to degrees or radians</li>
</ul>
<p>To generate more complex expressions, it is possible to have variable assignments.</p>
<pre><code class="language-Rust">let mean = (A + B) / 2;
let coefficient = 0.357;
mean * coefficient
</code></pre>
<p>Note, that all assignments are separated by semicolons.
However, the last expression must be without semicolon.</p>
<h2 id="inputs-1"><a class="header" href="#inputs-1">Inputs</a></h2>
<p>The <code>Expression</code> operator expects one to eight <em>raster</em> inputs.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>A</code></td><td><code>SingleRasterSource</code></td></tr>
<tr><td><code>B</code></td><td><code>SingleRasterSource</code></td></tr>
<tr><td><code>C</code></td><td><code>SingleRasterSource</code></td></tr>
<tr><td>…</td><td><code>SingleRasterSource</code></td></tr>
</tbody></table>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<p>The parsing of the expression can fail if there are, e.g., syntax errors.</p>
<h2 id="example-json-7"><a class="header" href="#example-json-7">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;Expression&quot;,
  &quot;params&quot;: {
    &quot;expression&quot;: &quot;(A - B) / (A + B)&quot;,
    &quot;outputType&quot;: &quot;F32&quot;,
    &quot;outputNoDataValue&quot;: &quot;NAN&quot;,
    &quot;mapNoData&quot;: false
  },
  &quot;sources&quot;: {
    &quot;A&quot;: {
      &quot;type&quot;: &quot;GdalSource&quot;,
      &quot;params&quot;: {
        &quot;dataset&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
        }
      }
    },
    &quot;B&quot;: {
      &quot;type&quot;: &quot;GdalSource&quot;,
      &quot;params&quot;: {
        &quot;dataset&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;699b9e14-4bd6-4d57-889a-58f60288b19c&quot;
        }
      }
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gdalsource"><a class="header" href="#gdalsource">GdalSource</a></h1>
<p>The <code>GdalSource</code> is a <em>source operator</em> that reads raster data using GDAL.
The counter part for vector data is the <a href="operators/"><code>OgrSource</code></a> (TODO: link).</p>
<h2 id="parameters-1"><a class="header" href="#parameters-1">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th><th>Default Value</th></tr></thead><tbody>
<tr><td><code>dataset</code></td><td><code>DatasetId</code></td><td>The id of the dataset to be loaded</td><td><pre><code>{<br>  &quot;type&quot;: &quot;internal&quot;,<br>  &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;<br>}</code></pre></td><td></td></tr>
</tbody></table>
<h2 id="inputs-2"><a class="header" href="#inputs-2">Inputs</a></h2>
<p>None</p>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<p>If the given dataset does not exist or is not readable, an error is thrown.</p>
<h2 id="example-json-8"><a class="header" href="#example-json-8">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;GdalSource&quot;,
  &quot;params&quot;: {
    &quot;dataset&quot;: {
      &quot;type&quot;: &quot;internal&quot;,
      &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reprojection"><a class="header" href="#reprojection">Reprojection</a></h1>
<p>The <code>Reprojection</code> operator reprojects data from one spatial reference system to another.
It accepts exactly one input which can either be a raster or a vector data stream.
The operator produces all data that, after reprojection, is contained in the query rectangle.</p>
<h2 id="data-type-specifics"><a class="header" href="#data-type-specifics">Data type specifics</a></h2>
<p>The concrete behavior depends on the data type.</p>
<h3 id="vector-data-1"><a class="header" href="#vector-data-1">Vector data</a></h3>
<p>The reprojection operator reprojects all coordinates of the features individually.
The result contains all features that, after reprojection, are <em>intersected</em> by the query rectangle.
If not all coordinates of the vector data stream could be projected, the operator returns an error.</p>
<h3 id="raster-data-1"><a class="header" href="#raster-data-1">Raster data</a></h3>
<p>To creates tiles in the target projection, the operator first loads the corresponding tiles in the source projection.
Note, that in order to create one reprojected output tile, it may be necessary to load multiple source tiles.
For each output pixel, the operator takes the value of the input pixel nearest to its upper left corner.</p>
<p>In order to obtain precise results but avoid loading too much data, the operators estimates the resolution in which it loads the input raster stream.
The estimate is based on the target resolution defined by the query rectangle and the relationship between the length of the diagonal of the query rectangle in both projections.
Please refer to the source code for details.</p>
<p>In case a tile, or part of a tile, is not available in the source projection because it is outside of the defined extent, the operator will produce pixels with <em>no data</em> values.
If the input raster stream has no <em>no data</em> value defined, the value <em>0</em> will be used instead.</p>
<h2 id="parameters-2"><a class="header" href="#parameters-2">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>targetSpatialReference</code></td><td><code>String</code></td><td>The srs string (<em>authority:code</em>) of the target spatial reference.</td><td><code>EPSG:4326</code></td></tr>
</tbody></table>
<h2 id="inputs-3"><a class="header" href="#inputs-3">Inputs</a></h2>
<p>The <code>Reprojection</code> operator expects exactly one <em>raster</em> or <em>vector</em> input.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>source</code></td><td><code>RasterOrVectorOperator</code></td></tr>
</tbody></table>
<h2 id="errors-3"><a class="header" href="#errors-3">Errors</a></h2>
<p>The operator returns an error if the target projection is unknown or if the input data cannot be reprojected.</p>
<h2 id="example-json-9"><a class="header" href="#example-json-9">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;Reprojection&quot;,
  &quot;params&quot;: {
    &quot;targetSpatialReference&quot;: &quot;EPSG:4326&quot;
  },
  &quot;sources&quot;: {
    &quot;source&quot;: {
      &quot;type&quot;: &quot;GdalSource&quot;,
      &quot;params&quot;: {
        &quot;dataset&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
        }
      }
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="scatterplot"><a class="header" href="#scatterplot">ScatterPlot</a></h1>
<p>The <code>ScatterPlot</code> is a <em>plot operator</em> that computes a scatter plot over two attributes of a vector dataset. 
Thereby, the operator considers all data in the given query rectangle.</p>
<p>In case of more than <code>500</code> points to plot, the representation changes from a regular scatter plot
to a 2D Histogram with buckets determined from the underlying data.</p>
<h2 id="parameter-2"><a class="header" href="#parameter-2">Parameter</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>columnX</code></td><td><code>String</code></td><td>The name of the attribute making up the x-axis of the plot.</td><td><code>&quot;width&quot;</code></td></tr>
<tr><td><code>columnY</code></td><td><code>String</code></td><td>The name of the attribute making up the y-axis of the plot.</td><td><code>&quot;height&quot;</code></td></tr>
</tbody></table>
<h2 id="inputs-4"><a class="header" href="#inputs-4">Inputs</a></h2>
<p>The operator consumes exactly one <em>vector</em> operator.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>source</code></td><td><code>SingleVectorSource</code></td></tr>
</tbody></table>
<h2 id="errors-4"><a class="header" href="#errors-4">Errors</a></h2>
<p>The operator returns an error if one of the selected columns does not exist or is not numeric.</p>
<h2 id="notes-1"><a class="header" href="#notes-1">Notes</a></h2>
<p>If your dataset contains <code>infinite</code> or <code>NAN</code> values, they are ignored for the computation. Moreover, if 
your dataset contains more than <code>10.000</code> values, the buckets of the histogram are generated based on
those <code>10.000</code>values. Later values outside those bounds are ignored. </p>
<h2 id="example-json-10"><a class="header" href="#example-json-10">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;ScatterPlot&quot;,
  &quot;params&quot;: {
    &quot;columnX&quot;: &quot;width&quot;,
    &quot;columnY&quot;: &quot;height&quot;
  },
  &quot;sources&quot;: {
    &quot;vector&quot;: {
      &quot;type&quot;: &quot;OgrSource&quot;,
      &quot;params&quot;: {
        &quot;dataset&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
        }
      }
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="temporalrasteraggregation"><a class="header" href="#temporalrasteraggregation">TemporalRasterAggregation</a></h1>
<p>The <code>TemporalRasterAggregation</code> aggregates a raster time series into uniform time intervals.
The output is a time series that begins at the <code>start</code> of the query time.
Each time slice has the same length, defined by the <code>window</code> parameter.
The pixel values are computed by aggregating all rasters contained in the input that are valid in the current window using the defined <code>aggregation</code> method.
All output slices that are contained in the query time interval are produced by the operator.</p>
<p>An example usage scenario is to transform a daily raster time series into monthly aggregates.
Here, the query should start at the beginning of the month and the window should be 1 month.
The aggregation method allows calculating, e.g., the maximum or mean value for each pixel.
If we perform a query with time [2021-01-01, 2021-04-1), we would get a time series with three time steps.
If we perform a query with an instant like [2021-01-01, 2021-01-1), we will get a single time step containing the aggregated values for January 2021.</p>
<h2 id="parameters-3"><a class="header" href="#parameters-3">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>aggregation</code></td><td><code>Aggregation</code></td><td>method for aggregating pixels</td><td><pre><code>{<br>  &quot;type&quot;: &quot;max&quot;,<br>  &quot;ignoreNoData&quot;: false<br>}</code></pre></td></tr>
<tr><td><code>window</code></td><td><a href="operators//datatypes/timestep.html"><code>TimeStep</code></a></td><td>length of time steps</td><td><pre><code>{<br>  &quot;granularity&quot;: &quot;Months&quot;,<br>  &quot;step&quot;: 1<br>}</code></pre></td></tr>
</tbody></table>
<h2 id="types-1"><a class="header" href="#types-1">Types</a></h2>
<p>The following describes the types used in the parameters.</p>
<h3 id="aggregation"><a class="header" href="#aggregation">Aggregation</a></h3>
<p>There are different methods that can be used to aggregate the raster time series.
Encountering a <em>no data</em> value makes the aggregation value of a pixel also <em>no data</em>, unless the <code>ignoreNoData</code> parameter is set to <code>true</code>.</p>
<table><thead><tr><th>Variant</th><th>Parameters</th><th>Description</th></tr></thead><tbody>
<tr><td><code>min</code></td><td><code>ignoreNoData</code>: <code>bool</code></td><td>minimum value</td></tr>
<tr><td><code>max</code></td><td><code>ignoreNoData</code>: <code>bool</code></td><td>maximum value</td></tr>
<tr><td><code>first</code></td><td><code>ignoreNoData</code>: <code>bool</code></td><td>first encountered value</td></tr>
<tr><td><code>last</code></td><td><code>ignoreNoData</code>: <code>bool</code></td><td>last encountered value</td></tr>
<tr><td><code>mean</code></td><td><code>ignoreNoData</code>: <code>bool</code></td><td>mean value</td></tr>
</tbody></table>
<h2 id="inputs-5"><a class="header" href="#inputs-5">Inputs</a></h2>
<p>The <code>TemporalRasterAggregation</code> operator expects exactly one <em>raster</em> input.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>raster</code></td><td><code>SingleRasterSource</code></td></tr>
</tbody></table>
<h2 id="errors-5"><a class="header" href="#errors-5">Errors</a></h2>
<p>If the aggregation method is <code>first</code>, <code>last</code> or <code>mean</code> and the input raster has no <em>no data</em> value, an error is thrown.</p>
<h2 id="example-json-11"><a class="header" href="#example-json-11">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;TemporalRasterAggregation&quot;,
  &quot;params&quot;: {
    &quot;aggregation&quot;: {
      &quot;type&quot;: &quot;max&quot;,
      &quot;ignoreNoData&quot;: false
    },
    &quot;window&quot;: {
      &quot;granularity&quot;: &quot;Months&quot;,
      &quot;step&quot;: 1
    },
    &quot;sources&quot;: {
      &quot;raster&quot;: {
        &quot;type&quot;: &quot;GdalSource&quot;,
        &quot;params&quot;: {
          &quot;dataset&quot;: {
            &quot;type&quot;: &quot;internal&quot;,
            &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
          }
        }
      }
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="timeprojection"><a class="header" href="#timeprojection">TimeProjection</a></h1>
<p>The <code>TimeProjection</code> projects vector dataset timestamps to new granularities and ranges.
The output is a new vector dataset with the same geometry and attributes as the input.
However, each time step is projected to a new time range.
Moreover, the query rectangle's temporal extent is enlarged as well to include the projected time range.</p>
<p>An example usage scenario is to transform snapshot observations into yearly time slices.
For instance, animal occurrences are observed at a daily granularity.
If you want to aggregate the data to a yearly granularity, you can use the <code>TimeProjection</code> operator.
This will change the validity of each element in the dataset to the full year where it was observed.
This is, for instance, useful when you want to combine it with raster time series and use different temporal semantics than the originally recorded validities.</p>
<h2 id="parameters-4"><a class="header" href="#parameters-4">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>step</code></td><td><a href="operators//datatypes/timestep.html"><code>TimeStep</code></a></td><td>time granularity and size for the projection</td><td><pre><code>{<br>  &quot;granularity&quot;: &quot;Years&quot;,<br>  &quot;step&quot;: 1<br>}</code></pre></td></tr>
<tr><td><code>stepReference</code></td><td><a href="operators//datatypes/timeinstance.html"><code>TimeInstance</code></a></td><td>(Optional) an anchor point for the time <code>step</code></td><td><pre>&quot;2010-01-01T00:00:00Z&quot;</pre></td></tr>
</tbody></table>
<h2 id="inputs-6"><a class="header" href="#inputs-6">Inputs</a></h2>
<p>The <code>TemporalRasterAggregation</code> operator expects exactly one <em>vector</em> input.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>vector</code></td><td><code>SingleVectorSource</code></td></tr>
</tbody></table>
<h2 id="errors-6"><a class="header" href="#errors-6">Errors</a></h2>
<p>If the <code>step</code> is negative, an error is thrown.</p>
<h2 id="example-json-12"><a class="header" href="#example-json-12">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;TimeProjection&quot;,
  &quot;params&quot;: {
    &quot;step&quot;: {
      &quot;granularity&quot;: &quot;Years&quot;,
      &quot;step&quot;: 1
    }
  },
  &quot;sources&quot;: {
    &quot;vector&quot;: {
      &quot;type&quot;: &quot;OgrSource&quot;,
      &quot;params&quot;: {
        &quot;dataset&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;a626c880-1c41-489b-9e19-9596d129859c&quot;
        }
      }
    }
  }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
