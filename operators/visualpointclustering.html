<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js geo-engine">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VisualPointClustering - Geo Engine Docs</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "geo-engine" : "geo-engine";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('geo-engine')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <div class="sidebar-scrollbox">
                <!-- TODO: Replace with standard functionality: https://github.com/rust-lang/mdBook/pull/1584 -->
                <div class="sidebar-book-logo">
                    <img src="../images/GeoEngine_Mainlogo.png" alt="Geo Engine">
                </div>
                <ol class="chapter"><li class="chapter-item expanded "><a href="../welcome.html"><strong aria-hidden="true">1.</strong> Welcome to Geo Engine Docs</a></li><li class="chapter-item expanded "><a href="../geoengine/intro.html"><strong aria-hidden="true">2.</strong> The Geo Engine</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Engine</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.2.</strong> Workflows</div></li></ol></li><li class="chapter-item expanded "><a href="../api/intro.html"><strong aria-hidden="true">3.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Datasets</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Projects</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Upload</div></li><li class="chapter-item expanded "><a href="../api/workflows.html"><strong aria-hidden="true">3.4.</strong> Workflows</a></li></ol></li><li class="chapter-item expanded "><a href="../datatypes/intro.html"><strong aria-hidden="true">4.</strong> Datatypes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../datatypes/colorizer.html"><strong aria-hidden="true">4.1.</strong> Colorizer</a></li><li class="chapter-item expanded "><a href="../datatypes/measurement.html"><strong aria-hidden="true">4.2.</strong> Measurement</a></li><li class="chapter-item expanded "><a href="../datatypes/queryrectangle.html"><strong aria-hidden="true">4.3.</strong> QueryRectangle</a></li><li class="chapter-item expanded "><a href="../datatypes/rasterdatatype.html"><strong aria-hidden="true">4.4.</strong> RasterDataType</a></li><li class="chapter-item expanded "><a href="../datatypes/timeinstance.html"><strong aria-hidden="true">4.5.</strong> TimeInstance</a></li><li class="chapter-item expanded "><a href="../datatypes/timeinterval.html"><strong aria-hidden="true">4.6.</strong> TimeInterval</a></li><li class="chapter-item expanded "><a href="../datatypes/timestep.html"><strong aria-hidden="true">4.7.</strong> TimeStep</a></li></ol></li><li class="chapter-item expanded "><a href="../operators/intro.html"><strong aria-hidden="true">5.</strong> Operators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../operators/columnrangefilter.html"><strong aria-hidden="true">5.1.</strong> ColumnRangeFilter</a></li><li class="chapter-item expanded "><a href="../operators/expression.html"><strong aria-hidden="true">5.2.</strong> Expression</a></li><li class="chapter-item expanded "><a href="../operators/gdalsource.html"><strong aria-hidden="true">5.3.</strong> GdalSource</a></li><li class="chapter-item expanded "><a href="../operators/interpolation.html"><strong aria-hidden="true">5.4.</strong> Interpolation</a></li><li class="chapter-item expanded "><a href="../operators/neighborhoodaggregate.html"><strong aria-hidden="true">5.5.</strong> NeighborhoodAggregate</a></li><li class="chapter-item expanded "><a href="../operators/ogrsource.html"><strong aria-hidden="true">5.6.</strong> OgrSource</a></li><li class="chapter-item expanded "><a href="../operators/pointinpolygon.html"><strong aria-hidden="true">5.7.</strong> PointInPolygon</a></li><li class="chapter-item expanded "><a href="../operators/rasterization.html"><strong aria-hidden="true">5.8.</strong> Rasterization</a></li><li class="chapter-item expanded "><a href="../operators/rastertypeconversion.html"><strong aria-hidden="true">5.9.</strong> RasterTypeConversion</a></li><li class="chapter-item expanded "><a href="../operators/rasterscaling.html"><strong aria-hidden="true">5.10.</strong> RasterScaling</a></li><li class="chapter-item expanded "><a href="../operators/reprojection.html"><strong aria-hidden="true">5.11.</strong> Reprojection</a></li><li class="chapter-item expanded "><a href="../operators/temporalrasteraggregation.html"><strong aria-hidden="true">5.12.</strong> TemporalRasterAggregation</a></li><li class="chapter-item expanded "><a href="../operators/timeprojection.html"><strong aria-hidden="true">5.13.</strong> TimeProjection</a></li><li class="chapter-item expanded "><a href="../operators/timeshift.html"><strong aria-hidden="true">5.14.</strong> TimeShift</a></li><li class="chapter-item expanded "><a href="../operators/vectorjoin.html"><strong aria-hidden="true">5.15.</strong> VectorJoin</a></li><li class="chapter-item expanded "><a href="../operators/visualpointclustering.html" class="active"><strong aria-hidden="true">5.16.</strong> VisualPointClustering</a></li></ol></li><li class="chapter-item expanded "><a href="../plots/intro.html"><strong aria-hidden="true">6.</strong> Plots</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../plots/boxplot.html"><strong aria-hidden="true">6.1.</strong> BoxPlot</a></li><li class="chapter-item expanded "><a href="../plots/classHistogram.html"><strong aria-hidden="true">6.2.</strong> ClassHistogram</a></li><li class="chapter-item expanded "><a href="../plots/featureattributevaluesoverTime.html"><strong aria-hidden="true">6.3.</strong> FeatureAttributeValuesOverTime</a></li><li class="chapter-item expanded "><a href="../plots/histogram.html"><strong aria-hidden="true">6.4.</strong> Histogram</a></li><li class="chapter-item expanded "><a href="../plots/meanrasterpixelvaluesovertime.html"><strong aria-hidden="true">6.5.</strong> MeanRasterPixelValuesOverTime</a></li><li class="chapter-item expanded "><a href="../plots/piechart.html"><strong aria-hidden="true">6.6.</strong> PieChart</a></li><li class="chapter-item expanded "><a href="../plots/scatterplot.html"><strong aria-hidden="true">6.7.</strong> ScatterPlot</a></li><li class="chapter-item expanded "><a href="../plots/statistics.html"><strong aria-hidden="true">6.8.</strong> Statistics</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> OGC Access</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> WMS</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Solutions</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Geo Engine Pro</div></li></ol></li></ol>                <ol class="chapter">
                    <li class="part-title">API Reference</li>
                    <li class="chapter-item">
                        <a href="https://python.docs.geoengine.io" style="width: 100%; display: flex; flex-direction: row;">
                            <span style="flex: 1;">Python</span>
                            <i class="fa fa-external-link" style="align-self: center;"></i>
                        </a>
                    </li>
                </ol>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <!-- TODO: include back if we have a dark theme -->
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list" style="display: none;">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Geo Engine Docs</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="visualpointclustering"><a class="header" href="#visualpointclustering">VisualPointClustering</a></h1>
<p>The <code>VisualPointClustering</code> is a clustering operator for point collections that removes clutter and preserves the spatial structure of the input.
The output is a point collection with a count and radius attribute.
The operator utilizes the input resolution of the query to determine when points, being displayed as circles, would overlap.
Moreover, it allows aggregating non-geo attributes to preserve the other columns of the input.
For more information on the algorithm, cf. the paper <a href="https://doi.org/10.1145/3139958.3140037">Beilschmidt, C. et al.: A Linear-Time Algorithm for the Aggregation and Visualization of Big Spatial Point Data. SIGSPATIAL/GIS 2017: 73:1-73:4</a>.</p>
<p>An exemplary use case for this operator is the visualization of point data in an online map application.
There, you can use this operator as the final step of the workflow to cluster the points and display them as circles.
These circles then pose a decluttered view of the data, e.g., via a WFS endpoint.</p>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>minRadiusPx</code></td><td>number</td><td>Minimum circle radius in screen pixels</td><td><pre>10</pre></td></tr>
<tr><td><code>deltaPx</code></td><td>number</td><td>Minimum circle to circle distance in screen pixels input</td><td><pre>1</pre></td></tr>
<tr><td><code>radiusColumn</code></td><td>string</td><td>The new column name to store radius information in screen pixels</td><td><pre>&quot;__radius&quot;</pre></td></tr>
<tr><td><code>countColumn</code></td><td>string</td><td>The new column name to store the number of points represented by each circle</td><td><pre>&quot;__count&quot;</pre></td></tr>
<tr><td><code>columnAggregates</code></td><td>Map from string to aggregate definition (one of <code>MeanNumber</code>, <code>StringSample</code> or <code>Null</code>)</td><td>Specify how miscellaneous columns should be aggregated. You can optionally set a new <a href="../datatypes/measurement.html"><code>Measurement</code></a>. Otherwise, the <a href="../datatypes/measurement.html"><code>Measurement</code></a> is taken from the source column.</td><td><pre><code>{<br>  &quot;foo&quot;: {<br>    &quot;columnName&quot;: &quot;numericColumn&quot;,<br>    &quot;aggregateType&quot;: &quot;MeanNumber&quot;,<br>    &quot;measurement&quot;: { &quot;type&quot;: &quot;unitless&quot; }<br>  },<br>  &quot;bar&quot;: {<br>    &quot;columnName&quot;: &quot;textColumn&quot;,<br>    &quot;aggregateType&quot;: &quot;StringSample&quot;<br>  }<br>}</code></pre></td></tr>
</tbody></table>
<h2 id="inputs"><a class="header" href="#inputs">Inputs</a></h2>
<p>The <code>VisualPointClustering</code> operator expects exactly one <em>vector</em> input that must be a point collection.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>vector</code></td><td><code>SingleVectorSource</code></td></tr>
</tbody></table>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<p>If the source value <code>vector</code> is not a point collection, an error is thrown.</p>
<p>If multiple columns in <code>columnAggregates</code> have the same names, an error is thrown.</p>
<h2 id="example-json"><a class="header" href="#example-json">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;VisualPointClustering&quot;,
  &quot;params&quot;: {
    &quot;minRadiusPx&quot;: 8.0,
    &quot;deltaPx&quot;: 1.0,
    &quot;radiusColumn&quot;: &quot;__radius&quot;,
    &quot;countColumn&quot;: &quot;__count&quot;,
    &quot;columnAggregates&quot;: {
      &quot;mean_population&quot;: {
        &quot;columnName&quot;: &quot;population&quot;,
        &quot;aggregateType&quot;: &quot;MeanNumber&quot;,
        &quot;measurement&quot;: { &quot;type&quot;: &quot;unitless&quot; }
      },
      &quot;sample_names&quot;: {
        &quot;columnName&quot;: &quot;name&quot;,
        &quot;aggregateType&quot;: &quot;StringSample&quot;
      }
    }
  },
  &quot;sources&quot;: {
    &quot;vector&quot;: {
      &quot;type&quot;: &quot;OgrSource&quot;,
      &quot;params&quot;: {
        &quot;data&quot;: {
          &quot;type&quot;: &quot;internal&quot;,
          &quot;datasetId&quot;: &quot;e977b123-ca47-4c5b-aace-481119826aaf&quot;
        },
        &quot;attributeProjection&quot;: [&quot;name&quot;, &quot;population&quot;]
      }
    }
  }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../operators/vectorjoin.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../plots/intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../operators/vectorjoin.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../plots/intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
