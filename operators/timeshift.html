<!DOCTYPE HTML>
<html lang="en" class="geo-engine sidebar-visible" dir="">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>TimeShift - Geo Engine Docs</title>
                

        <!-- Custom HTML head -->
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "geo-engine" : "geo-engine";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('geo-engine')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
             <!-- TODO: Replace with standard functionality: https://github.com/rust-lang/mdBook/pull/1584 -->
            <div class="sidebar-book-logo">
                    <img src="../images/GeoEngine_Mainlogo.png" alt="Geo Engine">
            </div>

            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox">
                <ol class="chapter">
                <li class="part-title">API Reference</li>
                <li class="chapter-item">
                    <a href="https://python.docs.geoengine.io" style="width: 100%; display: flex; flex-direction: row;">
                        <span style="flex: 1;">Python</span>
                        <i class="fa fa-external-link" style="align-self: center;"></i>
                    </a>
                </li>
            </ol>
            </mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>

            

            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Geo Engine Docs</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="timeshift"><a class="header" href="#timeshift">TimeShift</a></h1>
<p>The <code>TimeShift</code> operator allows retrieving data temporally relative to the actual <a href="./../datatypes/queryrectangle.html"><code>QueryRectangle</code></a>.
It shifts the query rectangle by a given amount of time and modifies the result data accordingly.
Users have two options for specifying the time shift:</p>
<ol>
<li>Relative shift – shift relatively to the query rectangle, e.g., one month or one year to the past.
This can be useful for comparing multiple points in time relative to the query rectangle.</li>
<li>Absolute shift – change query rectangle to a fixed temporal reference, e.g., January 2014.
This can be used to compare data in the query rectangle's time to a fixed point of reference.</li>
</ol>
<p>The output is either a stream of raster data or a stream of vector data depending on the input.</p>
<p>An example usage scenario is to compare the current time with the previous time of the same raster data.
For instance, a raster source outputs monthly data aggregates of mean temperatures.
If you want to compute the difference between the current month and the previous month, you can use the <code>TimeShift</code> operator.
You will have two workflows.
One is the unmodified temperature raster source.
The other is the same source, shifted by one month.
Then, you can use both workflows as sources of an <a href="./expression.html"><code>Expression</code></a> operator.</p>
<p><em>Note</em>: This operator modifies the time values of the returned data.
For rasters and vector data, it shifts the time intervals opposite to the time shift specified in the operator.
This is necessary to have only data inside the result that is part of the <a href="./../datatypes/queryrectangle.html"><code>QueryRectangle</code>'s</a> time interval.
As an example, we shift monthly data by one month to the past.
Our query rectangle points to February.
Then, the operator shifts the query rectangle to January.
The data, originally valid for January, is shifted forward to February again, to fit into the original query rectangle, which is February.
<img src="../images/time-shift-explanation.png" alt="Time Shift" /></p>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>type</code></td><td><code>relative</code> or <code>absolute</code></td><td>shift relatively or absolute</td><td><pre>&quot;relative&quot;</pre></td></tr>
</tbody></table>
<h3 id="relative"><a class="header" href="#relative">Relative</a></h3>
<p>If <code>type</code> is <code>relative</code>, you need to specify the following parameters:</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>granularity</code></td><td><a href="/datatypes/timestep.html"><code>TimeGranularity</code></a></td><td>time granularity and for the shift</td><td><pre>&quot;months&quot;</pre></td></tr>
<tr><td><code>value</code></td><td><code>integer</code></td><td>the size of the step</td><td><pre>-1</pre></td></tr>
</tbody></table>
<h3 id="absolute"><a class="header" href="#absolute">Absolute</a></h3>
<p>If the <code>type</code> is <code>absolute</code>, you need to specify the following parameters:</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Example Value</th></tr></thead><tbody>
<tr><td><code>timeInterval</code></td><td><a href="/datatypes/timeinterval.html"><code>TimeInterval</code></a></td><td>A fixed shift of the <a href="./../datatypes/queryrectangle.html"><code>QueryRectangle</code>'s</a> time</td><td><pre><code>{<br>  &quot;start&quot;: &quot;2010-01-01T00:00:00Z&quot;,<br>  &quot;end&quot;: &quot;2010-02-01T00:00:00Z&quot;<br>}</code></pre></td></tr>
</tbody></table>
<h2 id="inputs"><a class="header" href="#inputs">Inputs</a></h2>
<p>The <code>TimeShift</code> operator expects either one <em>vector</em> input or one <em>raster</em> input.</p>
<table><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody>
<tr><td><code>source</code></td><td><code>SingleRasterOrVectorSource</code></td></tr>
</tbody></table>
<h2 id="example-json"><a class="header" href="#example-json">Example JSON</a></h2>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;TimeShift&quot;,
  &quot;params&quot;: {
    &quot;type&quot;: &quot;relative&quot;,
    &quot;granularity&quot;: &quot;months&quot;,
    &quot;value&quot;: -1
  },
  &quot;sources&quot;: {
    &quot;source&quot;: {
      &quot;type&quot;: &quot;GdalSource&quot;,
      &quot;params&quot;: {
        &quot;data&quot;: &quot;ndvi&quot;
      }
    }
  }
}
</code></pre>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;TimeShift&quot;,
  &quot;params&quot;: {
    &quot;type&quot;: &quot;absolute&quot;,
    &quot;time_interval&quot;: {
      &quot;start&quot;: &quot;2010-01-01T00:00:00Z&quot;,
      &quot;end&quot;: &quot;2010-02-01T00:00:00Z&quot;
    }
  },
  &quot;sources&quot;: {
    &quot;source&quot;: {
      &quot;type&quot;: &quot;GdalSource&quot;,
      &quot;params&quot;: {
        &quot;data&quot;: &quot;ndvi&quot;
      }
    }
  }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../operators/timeprojection.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next prefetch" href="../operators/vectorexpression.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../operators/timeprojection.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next prefetch" href="../operators/vectorexpression.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script>
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>
        
        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        
        
    </div>
    </body>
</html>
